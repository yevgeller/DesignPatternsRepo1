@page
@model DesignPatternsRepo1.Pages.Test1Model
@{
}


<div id="div1">Testing Shmesting</div>

<div id="tbl"></div>
<br />
<br />
<table>
    <tr><td>1-1</td><td>1-2</td></tr>
    <tr><td>2-1</td><td>2-2</td></tr>
</table>

<script>
    const field = Array.from(Array(10), () => new Array(10).fill('.'));

    document.addEventListener("DOMContentLoaded", function () {
        document.getElementById('div1').addEventListener('click', one);
        createField();
        createTable();
        document.querySelectorAll('#field td').forEach(el => el.addEventListener('click', function () {
            let row = el.getAttribute('data-row');
            let col = el.getAttribute('data-col');
            console.log('row-col:', row + ' - ' + col);
            console.log('field value:', field[row][col]);
        }));
    });

    function one() {
        alert('Hi!');
    }

    function createField() {
        console.log(field);
        let mineCount = 10;

        while (mineCount > 0) {
            rndRow = randomNumber();
            rndCol = randomNumber();
            if (field[rndRow][rndCol] !== 'X') {
                field[rndRow][rndCol] = 'X';
                mineCount--;
            }
        }
        console.log(field);
    }

    function createTable() {

        const rows = 10;
        let container = document.getElementById("tbl");
        let tbl = document.createElement('table');
        tbl.setAttribute('id', 'field');
        let tbody = document.createElement('tbody')
        for (let i = 0; i < rows; i++) {
            let tr = document.createElement('tr');
            for (let j = 0; j < rows; j++) {
                let td = document.createElement('td');
                td.setAttribute('data-row', i);
                td.setAttribute('data-col', j);
                let textNode = i + ' - ' + j;

                if(field[i][j]=='X') {
                
                    textNode = 'X';
                }
                td.appendChild(document.createTextNode(textNode));
                tr.appendChild(td);
                tbody.appendChild(tr);
            }
            tbl.appendChild(tbody);
            container.appendChild(tbl);
        }
    }

    function randomNumber() {
        const upperBound = 10;
        return Math.floor(Math.random() * upperBound);
    }

</script>

<style>
    td {
        border: 1px solid red;
        padding: 1px;
        margin: 3px;
    }
</style>